<!doctype html><html lang=ru class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.96.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Принципы синхронного API | Леруа Мерлен Цифровые Технологии</title><link rel=stylesheet href=https://unpkg.com/aos@3.0.0-beta.6/dist/aos.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel=stylesheet><meta property="og:title" content="Принципы синхронного API"><meta property="og:description" content="Приложение отправляет запрос получателю и останавливает работу, пока ждёт ответа. Такой подход применяют, если нужно сохранить порядок вызовов систем.
    Уровень 0
Легаси Используем XML, единственный URI и HTTP-метод — обычно POST.
     Уровень 1
Ресурсы Каждому ресурсу отдельный эндпоинт, можно перейти на JSON.
     Уровень 2
HTTP-глаголы Используем правильные HTTP-методы и статус-коды, поддерживаем фильтрацию, пагинацию, поиск, сортировку и версионирование."><meta property="og:type" content="article"><meta property="og:url" content="/knowledge/sync/"><meta property="og:image" content="https://leroymerlin-tech.ru/images/leroy-merlin-tech.jpg"><meta property="article:section" content="knowledge"><meta property="article:modified_time" content="2022-10-26T14:47:41+04:00"><meta property="og:site_name" content="Леруа Мерлен Цифровые Технологии"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://leroymerlin-tech.ru/images/leroy-merlin-tech.jpg"><meta name=twitter:title content="Принципы синхронного API"><meta name=twitter:description content="Приложение отправляет запрос получателю и останавливает работу, пока ждёт ответа. Такой подход применяют, если нужно сохранить порядок вызовов систем.
    Уровень 0
Легаси Используем XML, единственный URI и HTTP-метод — обычно POST.
     Уровень 1
Ресурсы Каждому ресурсу отдельный эндпоинт, можно перейти на JSON.
     Уровень 2
HTTP-глаголы Используем правильные HTTP-методы и статус-коды, поддерживаем фильтрацию, пагинацию, поиск, сортировку и версионирование."><script async src="https://www.googletagmanager.com/gtag/js?id=G-EJPYBKPS1Q"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EJPYBKPS1Q")</script><link rel=preload href=/scss/main.min.c7bec4b0628b5f33533ad9eae93298d18d9c45acf837ee98e2896f9dc579aed4.css as=style><link href=/scss/main.min.c7bec4b0628b5f33533ad9eae93298d18d9c45acf837ee98e2896f9dc579aed4.css rel=stylesheet integrity></head><body><header class="header header--inner" data-header-fixed data-aos=fade-up><div class="header__wrapper container container--1920w"><h1 class=logo><a href=/ aria-label="Перейти на Главную">Леруа Мерлен<br><span>Цифровые Технологии</span></a></h1><button class=menu-toggle-btn><svg class="menu-toggle-btn__icon menu-toggle-btn__icon--open" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 7c-.55228.0-1 .44772-1 1s.44772 1 1 1H20C20.5523 9 21 8.55228 21 8S20.5523 7 20 7H4zm0 8C3.44772 15 3 15.4477 3 16 3 16.5523 3.44772 17 4 17H20C20.5523 17 21 16.5523 21 16 21 15.4477 20.5523 15 20 15H4z" fill="currentcolor"/></svg><svg class="menu-toggle-btn__icon menu-toggle-btn__icon--close" width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M25.178 23.7637C25.5685 24.1543 25.5685 24.7874 25.178 25.178 24.7874 25.5685 24.1543 25.5685 23.7637 25.178l-7.7532-7.7533L8.25726 25.178C7.86673 25.5685 7.23357 25.5685 6.84305 25.178 6.45252 24.7874 6.45252 24.1543 6.84305 23.7637l7.75325-7.7532L6.8427 8.25691c-.39053-.39052-.39053-1.02369.0-1.41421.39052-.39053 1.02369-.39053 1.41421.0l7.75359 7.7536 7.7536-7.7536C24.1546 6.45217 24.7878 6.45217 25.1783 6.8427 25.5688 7.23322 25.5688 7.86639 25.1783 8.25691L17.4247 16.0105l7.7533 7.7532z" fill="currentcolor"/></svg></button><div class=header__inner-wrapper data-fix-block><nav class="nav header__nav"><ul class=nav__list data-accordion=parent data-type=single data-accordion-max-width=1023><li class=nav__item data-accordion=element><a data-accordion=button>Инженерная культура<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.29289 16.2071C4.68342 16.5976 5.31658 16.5976 5.70711 16.2071L10.5 11.4142l4.7929 4.7929C15.6834 16.5976 16.3166 16.5976 16.7071 16.2071 17.0976 15.8166 17.0976 15.1834 16.7071 14.7929L10.5 8.58579 4.29289 14.7929c-.39052.390500000000001-.39052 1.0237.0 1.4142z" fill="#333"/></svg></a><ul class=nav__inner-list data-accordion=content><li class=nav__inner-item><a href=/values/people/>Люди</a></li><li class=nav__inner-item><a href=/values/architecture/>Архитектура</a></li><li class=nav__inner-item><a href=/values/technology/>Технологии</a></li></ul></li><li class=nav__item data-accordion=element><a data-accordion=button>Стек технологий<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.29289 16.2071C4.68342 16.5976 5.31658 16.5976 5.70711 16.2071L10.5 11.4142l4.7929 4.7929C15.6834 16.5976 16.3166 16.5976 16.7071 16.2071 17.0976 15.8166 17.0976 15.1834 16.7071 14.7929L10.5 8.58579 4.29289 14.7929c-.39052.390500000000001-.39052 1.0237.0 1.4142z" fill="#333"/></svg></a><ul class=nav__inner-list data-accordion=content><li class=nav__inner-item><a href=/stack/table/>Таблица технологий</a></li><li class=nav__inner-item><a href=/stack/how-to-start/>Как начать использовать новую технологию?</a></li></ul></li><li class=nav__item data-accordion=element><a class=active data-accordion=button>Знания<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.29289 16.2071C4.68342 16.5976 5.31658 16.5976 5.70711 16.2071L10.5 11.4142l4.7929 4.7929C15.6834 16.5976 16.3166 16.5976 16.7071 16.2071 17.0976 15.8166 17.0976 15.1834 16.7071 14.7929L10.5 8.58579 4.29289 14.7929c-.39052.390500000000001-.39052 1.0237.0 1.4142z" fill="#333"/></svg></a><ul class=nav__inner-list data-accordion=content><li class=nav__inner-item><a href=/knowledge/sync/>Принципы синхронного API</a></li><li class=nav__inner-item><a href=/knowledge/async/>Принципы асинхронного API</a></li><li class=nav__inner-item><a href=/knowledge/opensource/>Как подготовить код к open source?</a></li><li class=nav__inner-item><a href=/knowledge/innersourse/>Что такое InnerSource и как его использовать?</a></li><li class=nav__inner-item><a href=/knowledge/devops-maturity-matrix/>DevSecOps Матрица</a></li></ul></li><li class="nav__item cursor_pointer"><a href=/contacts/><span>Контакты</span></a></li></ul></nav><div class="socials header__socials"><ul class=socials__list><li class=socials__item><a class=socials__link href=https://github.com/adeo target=_blank><svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true"><path d="M10 0A10 10 0 006.84 19.49c.5.09.69-.21.69-.48l-.02-1.86c-2.51.46-3.16-.61-3.36-1.17-.11-.3-.6-1.18-1.03-1.42-.35-.19-.85-.65.0-.66.78-.01 1.34.72 1.53 1.03.9 1.5 2.34 1.08 2.91.82a2.1 2.1.0 01.64-1.34c-2.22-.25-4.55-1.11-4.55-4.94A3.9 3.9.0 014.67 6.8a3.6 3.6.0 01.1-2.65s.84-.26 2.76 1.02a9.28 9.28.0 015 0c1.9-1.3 2.75-1.02 2.75-1.02.54 1.37.2 2.4.1 2.65.63.7 1.02 1.58 1.02 2.68.0 3.84-2.34 4.7-4.56 4.94.36.31.67.91.67 1.85l-.01 2.75c0 .26.19.58.69.48A10.02 10.02.0 0010 0z" fill="currentcolor"/></svg></a></li><li class=socials__item><a class=socials__link href=https://t.me/leroymerlintech target=_blank><svg width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M15.9951 1.01983C16.0596.26112 15.4791-.181461 14.7052.0714424 11.8673 1.08306 9.09399 2.15789 6.25615 3.16951 4.32126 3.86499 2.45086 4.56048.515971 5.31919.193489 5.44564.0 5.63532.0 5.95144.0 6.26757.193489 6.45725.515971 6.5837 1.41892 6.89983 2.38637 7.21596 3.28932 7.53209c.58046.18968 1.09644.12645 1.61241-.18968 1.93489-1.20129 3.86978-2.40258 5.86917-3.6671C11.0289 3.48564 11.3514 3.35919 11.6094 3.16951 11.7383 3.10628 11.8673 3.04306 11.9963 3.16951 12.1253 3.29596 12.0608 3.42241 11.9318 3.54886l-.1935.18968L7.03011 8.16435C6.57863 8.60693 6.57863 8.98628 7.0946 9.36564c1.54792 1.13806 3.1603 2.21286 4.7082 3.35096C12.5768 13.2856 13.4152 12.9695 13.6087 12.0211c.516-2.14965 2.3219-10.11611 2.3864-11.00127z" fill="#888"/></svg></a></li><li class=socials__item><a class=socials__link href=https://habr.com/ru/company/leroy_merlin/blog/ target=_blank><svg width="10" height="15" viewBox="0 0 10 15" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3.32857 5.86364C4 4.93636 5 4.5 6.3 4.5 8.38571 4.5 10 5.93182 10 8.29091V15H6.67143V9.45c0-1.20682-.62143-1.88182-1.65-1.88182-.92857.0-1.69286.61364-1.69286 1.93637V15H0V0H3.32857V5.86364z" fill="#888"/></svg></a></li><li class=socials__item><a class=socials__link href=https://vc.ru/leroymerlintech target=_blank><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12.8058 7.42086C13.9835 7.42086 14.8702 6.93019 15.524 6.07597L14.6502 5.4093c-.2158.28445-.4948.51489-.8149.67315-.32.15827-.672499999999999.24003-1.0295.23885-1.2783.0-2.2045-1.04134-2.2045-2.31912C10.6013 2.72441 11.5124 1.62442 12.8422 1.62442c.591099999999999.0 1.0089.13955 1.3733.36533V3.11329h1.0996V1.47508L15.1044 1.3093C14.5.833743 13.5769.581299 12.8053.581299c-1.8862.0-3.42043 1.534231-3.42043 3.420451.0 1.88444 1.53333 3.41911 3.42043 3.41911H12.8058zm2.2813 6.74664L15.048 12.5929V8.75019H12.7546v1.1h1.1352V12.4573C13.8898 13.5804 13.032 14.3755 12.1666 14.3755 11.3013 14.3755 10.8498 13.7755 10.8498 12.6529V8.74974H8.70753v1.1h.984V12.8435c0 1.5236.85427 2.5734 2.37777 2.5734.8756.0 1.5422-.485799999999999 1.94-1.2347H14.0271L14.184 15.2293h1.7622V14.1689H15.0884V14.1666L15.0871 14.1675zM9.13153.742635H7.22042L5.5582 5.5693H5.53242L3.87909.742635H1.84264V1.84307H2.98798L4.95909 7.34441H6.0062V7.34307L8.06176 1.84352H9.13064V.743083L9.13153.742635zM.0541992 15.2435H1.18664v-1.132H.0546437v1.132H.0541992zM4.42753 10.0257H4.41509L4.34398 8.75019H2.32264V9.75286H3.3982V14.168H2.32264v1.0609H7.3182v-1.04H4.53687V11.5244C4.66264 10.56 5.38576 9.73641 6.37242 9.73641H6.3902L6.3702 10.7222H7.46975V8.73196H6.60042C5.60487 8.72929 4.8662 9.26797 4.42709 10.0262L4.42753 10.0257z" fill="#888"/></svg></a></li></ul></div></div></div><script>const menuToggle=document.querySelector(".menu-toggle-btn"),header=document.querySelector(".header"),body=document.body,scrollUp="scroll-up",scrollDown="scroll-down";let lastScroll=0;header.classList.add("header--transparent");const onScrollHeaderBehaviour=()=>{const e=window.pageYOffset,t=header.offsetHeight;e<=0&&header.classList.remove("header--fixed"),e<=t/2&body.classList.contains(scrollUp)&&header.classList.add("header--transparent"),e>10&&header.classList.remove("header--transparent"),e>20&&!header.classList.contains("header--fixed")&&(header.classList.add("header--fixed"),setTimeout(()=>{header.classList.add("animate")},1)),e>lastScroll&&!body.classList.contains(scrollDown)?(body.classList.remove(scrollUp),body.classList.add(scrollDown)):e<lastScroll&&body.classList.contains(scrollDown)&&(body.classList.remove(scrollDown),body.classList.add(scrollUp)),lastScroll=e};let timer=null;const onScrollStop=()=>{clearTimeout(timer),document.body.classList.remove("scroll-stop"),timer=setTimeout(function(){document.body.classList.add("scroll-stop")},300)};window.addEventListener("scroll",onScrollStop),window.addEventListener("scroll",onScrollHeaderBehaviour);const onNenuToggleClick=e=>{e.currentTarget.blur(),header.classList.toggle("active"),header.classList.contains("active")?(window.scrollLock.disableScrolling(),header.removeAttribute("data-aos")):(window.scrollLock.enableScrolling(),header.setAttribute("data-aos","fade-up"))};menuToggle&&menuToggle.addEventListener("click",onNenuToggleClick),document.addEventListener("DOMContentLoaded",()=>{window.scrollTo(0,0)})</script></header><aside class=sidebar data-accordion=parent><div class=sidebar__wrapper data-accordion=element><button class=sidebar__toggle type=button data-accordion=button>
Принципы синхронного API<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.29289 16.2071C4.68342 16.5976 5.31658 16.5976 5.70711 16.2071L10.5 11.4142l4.7929 4.7929C15.6834 16.5976 16.3166 16.5976 16.7071 16.2071 17.0976 15.8166 17.0976 15.1834 16.7071 14.7929L10.5 8.58579 4.29289 14.7929c-.39052.390500000000001-.39052 1.0237.0 1.4142z" fill="#333"/></svg></button><nav class=sidebar__nav aria-label="Дополнительная навигация" data-accordion=content><ul class=sidebar__list><li class=sidebar__item><a class=active>Знания</a><div class=sidebar__item-list></div><ul class=sidebar__inner-list><li class=sidebar__inner-item><a class=active id=m-/knowledge/sync/ href=/knowledge/sync/>Принципы синхронного API</a><nav id=TableOfContents><ul><li><a href=#построение-uri>Построение URI</a></li><li><a href=#http-методы>HTTP-методы</a></li><li><a href=#url-параметры-запросов>URL параметры запросов</a></li><li><a href=#пагинация>Пагинация</a></li><li><a href=#ответ-общие-правила>Ответ: Общие правила</a></li><li><a href=#ответ-статус-коды>Ответ: Статус коды</a></li><li><a href=#ответ-коды-ошибок>Ответ: Коды ошибок</a></li><li><a href=#ответы-формат-данных>Ответы: Формат данных</a></li></ul></nav><li class=sidebar__inner-item><a id=m-/knowledge/async/ href=/knowledge/async/>Принципы асинхронного API</a><li class=sidebar__inner-item><a id=m-/knowledge/opensource/ href=/knowledge/opensource/>Как подготовить код к open source?</a><li class=sidebar__inner-item><a id=m-/knowledge/innersourse/ href=/knowledge/innersourse/>Что такое InnerSource и как его использовать?</a><li class=sidebar__inner-item><a id=m-/knowledge/devops-maturity-matrix/ href=/knowledge/devops-maturity-matrix/>DevSecOps Матрица</a></li></ul></li></ul></nav></div></aside><main><div class=inner-page><div class="container container--wide"><div class=inner-page__grid><div class=inner-page__wrapper><div class=inner-page__inner-wrapper><div class=breadcrumb><ul class=breadcrumb__list><li class=breadcrumb__item><a>Знания</a></li><li class="breadcrumb__item active" aria-current=page><a>Принципы синхронного API</a></li></ul></div><div class=inner-page__content><div class=inner-page__heading><h1>Принципы синхронного API</h1></div><p>Приложение отправляет запрос получателю и останавливает работу, пока ждёт ответа. Такой подход применяют, если нужно сохранить порядок вызовов систем.</p><div class=inner-page__block><div class=levels><ol class=levels__list><li class=legacy-card><div class=legacy-card__indicator aria-hidden=true><span></span>
<span></span>
<span></span></div><h4 class=legacy-card__title>Уровень 0<br>Легаси</h4><p>Используем XML, единственный URI и HTTP-метод — обычно POST.</p></li><li class=legacy-card><div class=legacy-card__indicator aria-hidden=true><span></span>
<span></span>
<span></span></div><h4 class=legacy-card__title>Уровень 1<br>Ресурсы</h4><p>Каждому ресурсу отдельный эндпоинт, можно перейти на JSON.</p></li><li class=legacy-card><div class=legacy-card__indicator aria-hidden=true><span></span>
<span></span>
<span></span></div><h4 class=legacy-card__title>Уровень 2<br>HTTP-глаголы</h4><p>Используем правильные HTTP-методы и статус-коды, поддерживаем фильтрацию, пагинацию, поиск, сортировку и версионирование.</p></li></ol></div></div><p>Цель — достичь 2 уровня на всех канонических API.</p><hr><div class=inner-page__section><h2 id=построение-uri>Построение URI</h2><div class=uri-scheme><div class=uri-scheme__content><div class=uri-scheme__item><span class=uri-scheme__element>https://&ensp;</span><div class=uri-scheme__caption><svg width="60" height="12" viewBox="0 0 60 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0V0C1 3.77879 4.06331 6.84211 7.8421 6.84211H26.7217L30 10l3.2783-3.15789H52.1579C55.9367 6.84211 59 3.77879 59 0V0" stroke="#888" stroke-width="1.5"/></svg><span>схема</span></div></div><div class=uri-scheme__item><span class=uri-scheme__element>api.leroymerlin.ru&ensp;/&ensp;</span><div class=uri-scheme__caption><svg width="151" height="12" viewBox="0 0 151 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0V0C1 3.77879 4.06331 6.84211 7.8421 6.84211H73.2217L76.5 10l3.2783-3.15789H143.158C146.937 6.84211 150 3.77879 150 0V0" stroke="#888" stroke-width="1.5"/></svg><span>хост</span></div></div><div class=uri-scheme__item><span class=uri-scheme__element>domain&ensp;/&ensp;</span><div class=uri-scheme__caption><svg width="67" height="12" viewBox="0 0 67 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0V0C1 3.77879 4.06331 6.84211 7.8421 6.84211H29.9435L33.2217 10 36.5 6.84211H59.1579C62.9367 6.84211 66 3.77879 66 0V0" stroke="#888" stroke-width="1.5"/></svg><span>домен</span></div></div><div class=uri-scheme__item><span class=uri-scheme__element>application&ensp;</span><div class=uri-scheme__caption><svg width="95" height="12" viewBox="0 0 95 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0V0C1 3.77879 4.06331 6.84211 7.8421 6.84211H43.9435L47.2217 10 50.5 6.84211H87.1579C90.9367 6.84211 94 3.77879 94 0V0" stroke="#888" stroke-width="1.5"/></svg><span>система</span></div></div><div class=uri-scheme__item><span class=uri-scheme__element>/&ensp;v1 /&ensp;</span><div class=uri-scheme__caption><svg width="35" height="12" viewBox="0 0 35 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0V0C1 3.77879 4.06331 6.84211 7.8421 6.84211h6.1014L17.2217 10 20.5 6.84211h6.6579C30.9367 6.84211 34 3.77879 34 0V0" stroke="#888" stroke-width="1.5"/></svg><span>версия</span></div></div><div class=uri-scheme__item><span class=uri-scheme__element>products?</span><div class=uri-scheme__caption><svg width="87" height="12" viewBox="0 0 87 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0V0C1 3.77879 4.06331 6.84211 7.8421 6.84211H41.9435L45.2217 10 48.5 6.84211H79.1579C82.9367 6.84211 86 3.77879 86 0V0" stroke="#888" stroke-width="1.5"/></svg><span>продукт</span></div></div><div class=uri-scheme__item><span class=uri-scheme__element>siteId=12&statusCode=active</span><div class=uri-scheme__caption><svg width="183" height="12" viewBox="0 0 183 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 0V0C1 3.77879 4.06331 6.84211 7.8421 6.84211H97.2217L100.5 10 103.778 6.84211h71.38C178.937 6.84211 182 3.77879 182 0V0" stroke="#888" stroke-width="1.5"/></svg><span>параметры запроса</span></div></div></div></div><div class=inner-page__block><p>Используем <code>kebab-case</code> для URL и <code>camelCase</code> для параметров и атрибутов.</p><ul><li>У каждого ресурса свой эндпоинт.</li><li>Название ресурса всегда во множественном числе.</li><li>Если ресурс относится к другому, используем вложенность.<p class="block-bordered block-bordered--sm block-bordered--success"><code>/customers/{id}/addresses</code> все адреса конкретного кастомера</p></li><li>Максимальная вложенность — 1.<p class="block-bordered block-bordered--sm block-bordered--danger"><code>/suppliers/{id}/products/{id}/media/{id}</code> слишком глубоко</p></li><li>Можно использовать единственное число там, где других таких же предметов быть не может.</li><li><p class="block-bordered block-bordered--sm block-bordered--danger"><code>/delivery/v1/products</code> не бывает иных обьектов <code>delivery</code></p></li></ul></div><div class=inner-page__block><div class="block-bordered block-bordered--success"><h4>Хорошие примеры</h4><p><code>/customers</code> все кастомеры<br><code>/customers/{id}/addresses</code> все адреса конкретного кастомера<br><code>/products?supplierId={supplierId}</code> список продуктов по поставщику<br><code>/products/{id}</code> детали определённого продукта<br><code>/products/{id}/media</code> список медиа одного продукта</p></div></div><div class=inner-page__block><h3 id=умеренная-гранулярность>Умеренная гранулярность.</h3><p>Не надо возвращать информацию, которую не спрашивали.</p><div class="block-bordered block-bordered--danger block-bordered--sm"><pre>
  <code>/clients/1/address
  {
    “road”: “121 rue Chanzy”,
    “city”: “Hellemmes”,
    “country”: “France”,
    <b><s>“age”: 22</s></b> <span>— возраст здесь лишний</span>
  }</code>
</pre></div></div><h3 id=используем-суррогатные-ключи-правильно>Используем суррогатные ключи правильно.</h3><div class="inner-page__block inner-page__block--xs"><p>Суррогатный ключ — это ключ, искусственно сгенерированный системой. Не путать с первичным ключом базы данных. Ещё бывают натуральные ключи, сформированные из атрибутов, существующих в реальной жизни.</p><p>В REST API, вместо первичных ключей базы данных, лучше использовать натуральные ключи — если БД поменяется, у нас могут быть проблемы с интеграцией, да и вообще это не секьюрно.</p></div><div class="inner-page__block inner-page__block--xs"><div class="block-bordered block-bordered--success"><h4>Хорошие примеры</h4><p><code>/some-resource?tag=green</code> натуральный ключ green понятен пользователям<br><code>/customer/0012345</code> кастомер ID — суррогатный ключ для этого API</p></div></div><div class="block-bordered block-bordered--danger"><h4>Плохие примеры</h4><p><code>/some-resource?tag=1</code> вернуть всё с тегом green через его id «1»<br><code>/customer/23dde7-e89b-12d3-a456-4265</code> кастомер ID это UUID, сгенерированный БД</p></div></div><hr><div class=inner-page__section><h2 id=http-методы>HTTP-методы</h2><div class=inner-page__block><ul><li><span class="code code--default">GET</span> получить</li><li><span class="code code--default">POST</span> создать</li><li><span class="code code--default">PUT</span> перезаписать</li><li><span class="code code--default">PATCH</span> частично обновить</li><li><span class="code code--default">DELETE</span> удалить</li><li><span class="code code--default">OPTIONS</span> вернуть все HTTP-методы, доступные для эндпоинта</li></ul></div><h3 id=когда-что-то-не-подходит-используем>Когда что-то не подходит, используем</h3><ul><li>POST метод</li><li>action-глаголы</li><li>паттерн <code>/collections/{resource}:{action}</code><div class="block-bordered block-bordered--sm block-bordered--success"><h4>Пример</h4>POST /users/123:subscribe</div></li></ul></div><hr><div class=inner-page__section><h2 id=url-параметры-запросов>URL параметры запросов</h2><div class="inner-page__block inner-page__block--sm"><h3 id=заголовки>Заголовки</h3><p>Содержит технические параметры или элементы контекста.</p><div class="block-bordered block-bordered--light"><pre tabindex=0><code>Content-Type: application/json
ADEO-BU-CODE: 10
</code></pre></div></div><div class="inner-page__block inner-page__block--sm"><h3 id=path-параметры>Path-параметры</h3><p>Эти параметры — часть URL. С их помощью можно понять, к какому ресурсу мы обращаемся.</p><div class=block-bordered><p><code>/product/{id}/stocks</code></p></div></div><h3 id=query-параметры>Query-параметры</h3><p>Позволяют фильтровать и сортировать запросы.</p><div class="block-bordered block-bordered--success"><h4>Хорошие примеры</h4><p><code>/products?q=Luke+man</code> поиск продукта по тексту<br><code>/products?storeId=35</code> фильтрация продуктов по параметру магазина 35<br><code>/products?sort=name&desc=age,id</code> сортировка по возростанию name и убыванию age, а затем id.</p></div></div><hr><div class=inner-page__section><h2 id=пагинация>Пагинация</h2><ul><li>Пагинация по номеру страницы<p class="block-bordered block-bordered--sm block-bordered--success"><code>?page=2&perPage=100</code></p></li><li>Пагинация по курсору<div class="block-bordered block-bordered--sm block-bordered--success"><code>?limit=25&before=ZDMyNz6yORI3OTLo</code><p>Не стоит хранить курсоры: они быстро становятся невалидными из-за вставки или удаления элементов.</p></div></li><li>Пагинация через оффсет & лимит<p class="block-bordered block-bordered--sm block-bordered--success"><code>?limit=25&offset=50</code></p></li><li>Пагинация через временные метки<div class="block-bordered block-bordered--sm block-bordered--success"><code>?limit=25&since=1364849754</code><p>В качестве ключа для пагинации по временным меткам используем Unix timestamp.</p></div></li></ul></div><hr><div class=inner-page__section><h2 id=ответ-общие-правила>Ответ: Общие правила</h2><ul><li>Структура ответа HTTP не должна зависеть от структуры БД</li><li>Все поля должны быть понятны с бизнес-точки зрения</li><li>Все наименования полей должны быть простыми, интуитивными и согласованными</li><li>Лучше не использовать технические термины и специфические термины систем.</li></ul></div><hr><div class=inner-page__section><h2 id=ответ-статус-коды>Ответ: Статус коды</h2><div class="inner-page__block inner-page__block--sm"><h3 id=все-методы>Все методы</h3><ul><li>Для всех эндпоинтов необходимо возвращать статус-коды.</li><li>Каждый сервис потенциально должен уметь возвращать 500.</li><li>Каждый сервис, который требует минимум один обязательный параметр на вход, должен уметь возвращать 400 с описанием.</li><li>Каждый секьюрный сервис должен уметь возвращать 401.</li></ul></div><div class="inner-page__block inner-page__block--sm"><h3 id=get>GET</h3><ul><li>Если данных нет, каждый сервис должен возвращать 404.</li><li>Каждая коллекция должна вернуть 200, если возвращается полностью.</li><li>Каждая коллекция должна вернуть 206, если возвращается частично.</li></ul></div><div class="inner-page__block inner-page__block--sm"><h3 id=204-или-404>204 или 404</h3><p>Есть небольшой спор: какой код возвращать, когда URL корректный, но информация не найдена? Если информация запрашивалась по ключу, мы рекомендуем возвращать 404, если информация не найдена после фильтрации или поиска по параметрам — 204.</p></div><div class="inner-page__block inner-page__block--sm"><h3 id=post>POST</h3><ul><li>Возвращаем 201 после создания ресурса.</li></ul></div><div class="inner-page__block inner-page__block--sm"><h3 id=put--patch>PUT & PATCH:</h3><ul><li>Возвращаем 200 после обновления ресурса.</li></ul></div><h3 id=delete>DELETE</h3><ul><li>Возвращаем 204 после успешно удалённой информации.</li></ul></div><hr><div class=inner-page__section><h2 id=ответ-коды-ошибок>Ответ: Коды ошибок</h2><div class="inner-page__block inner-page__block--xs"><p>Вместе с HTTP кодами ответов в теле необходимо указать код ошибки. Это позволит потребителю понять, что именно пошло не так, и правильно среагировать. Ответ с ошибкой может содержать бизнес код ошибки с описанием причины падения. Все эти коды должны быть описаны в документации API.</p></div><div class="inner-page__block inner-page__block--sm"><p>Один из популярных форматов описания ошибок JSON-API:</p><div class=block-bordered><pre tabindex=0><code>{
  &#34;errors&#34;: [{
    &#34;code&#34;: &#34;ERR-01234&#34;,
    &#34;title&#34;: &#34;OAuth Exception&#34;,
    &#34;details&#34;: &#34;Session has expired at unix time 1385243766.&#34;, 
    &#34;links&#34;: {
      &#34;about&#34;: &#34;http://example.com/docs/errors/#ERR-01234&#34;
    }
  }]
}  
</code></pre></div></div><p>Кусок кода в формате сваггера с описанием кода ответа и кода ошибок:</p><div class=block-bordered><pre tabindex=0><code>{ 
  Responses:
    ”200”:
      description: mySuccessResponse
  Schema:
    type: array
  Items:
    $ref: “#/definitions/Pet”,
    “400”: 
      description: Invalid status value
}
</code></pre><br></div></div><hr><div class=inner-page__section><h2 id=ответы-формат-данных>Ответы: Формат данных</h2><div class="inner-page__block inner-page__block--sm"><h3 id=e164--телефонный-номер>E.164 – Телефонный номер</h3><p><code>[+][код страны][код местности][местный номер]</code></p><ul><li><span class="code code--default">+</span> — знак плюса</li><li><span class="code code--default">код страны</span> — международный код страны</li><li><span class="code code--default">код местности</span> — код местности без 0 в начале</li><li><span class="code code--default">местный номер</span> — местный номер телефона</li></ul></div><div class="inner-page__block inner-page__block--sm"><h3 id=iso-639--язык>ISO 639 – Язык</h3><ul><li><span class="code code--default">eng</span> – Английский</li><li><span class="code code--default">fra</span> – Французский</li><li><span class="code code--default">rus</span> – Русский</li></ul></div><div class="inner-page__block inner-page__block--sm"><h3 id=iso-3166-1--язык>ISO 3166-1 — Язык</h3><ul><li><span class="code code--default">Russia (Russian Federation) Россия</span> <span class="code code--default">RU</span> <span class="code code--default">RUS 643</span></li><li><span class="code code--default">France Франция</span> <span class="code code--default">FR</span> <span class="code code--default">FRA 250</span></li><li><span class="code code--default">China Китай</span> <span class="code code--default">CN</span> <span class="code code--default">CHN 156</span></li></ul></div><div class="inner-page__block inner-page__block--sm"><h3 id=iso-8601--дата>ISO 8601 – Дата</h3><ul><li><span class="code code--default">YYYY-MM</span> 2020-06</li><li><span class="code code--default">YYYYMMDD</span> 20200602</li><li><span class="code code--default">YYYY-MM-DDThh:mm:ss±hh</span> 2020-06-02T15:22:00+00:00</li></ul></div><div class="inner-page__block inner-page__block--sm"><h3 id=iso-4217--деньги>ISO 4217 — Деньги</h3><ul><li><span class="code code--default">EUR 978</span> – Евро</li><li><span class="code code--default">USD 840</span> – Доллар США</li><li><span class="code code--default">KZT 398</span> – Тенге</li><li><span class="code code--default">BYN 933</span> – Беларусский Рубль</li></ul></div><h3 id=ucum--меры-измерения>UCUM – Меры измерения</h3><p>Все меры измерения <a href=https://ucum.org/ target=_blank rel=noopener>в UCUM specification</a>.</p></div><hr><a class=button-improvement href=https://github.com/adeo/lmru--tech/issues/new? target=_blank><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14.9991 5h2c.5304.0 1.0391.21071 1.4142.58579C18.7883 5.96086 18.9991 6.46957 18.9991 7v8.17C19.6665 15.4059 20.2291 15.8702 20.5874 16.4808 20.9457 17.0914 21.0765 17.809 20.9569 18.5068 20.8372 19.2046 20.4747 19.8375 19.9334 20.2939 19.3922 20.7502 18.707 21.0005 17.9991 21.0005 17.2911 21.0005 16.6059 20.7502 16.0647 20.2939 15.5234 19.8375 15.1609 19.2046 15.0412 18.5068 14.9216 17.809 15.0524 17.0914 15.4107 16.4808 15.769 15.8702 16.3316 15.4059 16.9991 15.17V7h-2v3l-4.5-4 4.5-4V5zM4.99905 8.83C4.33156 8.59409 3.76896 8.1298 3.41069 7.51919c-.35826-.6106-.48912-1.32821-.36945-2.02598C3.16092 4.79545 3.52342 4.16246 4.06468 3.70613c.54126-.45633 1.22642-.70662 1.93437-.70662.70796.0 1.39312.25029 1.93437.70662C8.47468 4.16246 8.83719 4.79545 8.95686 5.49321 9.07654 6.19098 8.94568 6.90859 8.58741 7.51919 8.22915 8.1298 7.66655 8.59409 6.99905 8.83v6.34C7.66655 15.4059 8.22915 15.8702 8.58741 16.4808 8.94568 17.0914 9.07654 17.809 8.95686 18.5068 8.83719 19.2046 8.47468 19.8375 7.93342 20.2939 7.39217 20.7502 6.70701 21.0005 5.99905 21.0005 5.2911 21.0005 4.60594 20.7502 4.06468 20.2939 3.52342 19.8375 3.16092 19.2046 3.04124 18.5068 2.92157 17.809 3.05243 17.0914 3.41069 16.4808 3.76896 15.8702 4.33156 15.4059 4.99905 15.17V8.83z" fill="#5ab030"/></svg>Предложить улучшения</a></div></div><div class=inner-page__last-change>Последнее изменение 26.10.2022: <a href=https://github.com/adeo/lmru--tech/commit/22dab3fe449d2cf954b4778df40045349d696200>Small improvements (22dab3f)</a></div></div></div></div></div></main><footer class=footer><div class=footer__bottom><p class=footer__copy>&copy; 2022 ООО «ЛЕРУА МЕРЛЕН ЦИФРОВЫЕ ТЕХНОЛОГИИ»</p><ul class=footer__social><li class=footer__social-item><a class=footer__social-link target=_blank rel="noopener noreferrer nofollow" href=https://github.com/adeo aria-label=" "><svg class="inline-svg" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true"><path d="M10 0A10 10 0 006.84 19.49c.5.09.69-.21.69-.48l-.02-1.86c-2.51.46-3.16-.61-3.36-1.17-.11-.3-.6-1.18-1.03-1.42-.35-.19-.85-.65.0-.66.78-.01 1.34.72 1.53 1.03.9 1.5 2.34 1.08 2.91.82a2.1 2.1.0 01.64-1.34c-2.22-.25-4.55-1.11-4.55-4.94A3.9 3.9.0 014.67 6.8a3.6 3.6.0 01.1-2.65s.84-.26 2.76 1.02a9.28 9.28.0 015 0c1.9-1.3 2.75-1.02 2.75-1.02.54 1.37.2 2.4.1 2.65.63.7 1.02 1.58 1.02 2.68.0 3.84-2.34 4.7-4.56 4.94.36.31.67.91.67 1.85l-.01 2.75c0 .26.19.58.69.48A10.02 10.02.0 0010 0z" fill="currentcolor"/></svg></a></li><li class=footer__social-item><a class=footer__social-link target=_blank rel="noopener noreferrer nofollow" href=https://t.me/leroymerlintech aria-label=" "><svg width="16" height="13" viewBox="0 0 16 13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.9951 1.01983C16.0596.26112 15.4791-.181461 14.7052.0714424 11.8673 1.08306 9.09399 2.15789 6.25615 3.16951 4.32126 3.86499 2.45086 4.56048.515971 5.31919.193489 5.44564.0 5.63532.0 5.95144.0 6.26757.193489 6.45725.515971 6.5837 1.41892 6.89983 2.38637 7.21596 3.28932 7.53209c.58046.18968 1.09644.12645 1.61241-.18968 1.93489-1.20129 3.86978-2.40258 5.86917-3.6671C11.0289 3.48564 11.3514 3.35919 11.6094 3.16951 11.7383 3.10628 11.8673 3.04306 11.9963 3.16951 12.1253 3.29596 12.0608 3.42241 11.9318 3.54886l-.1935.18968L7.03011 8.16435C6.57863 8.60693 6.57863 8.98628 7.0946 9.36564c1.54792 1.13806 3.1603 2.21286 4.7082 3.35096C12.5768 13.2856 13.4152 12.9695 13.6087 12.0211c.516-2.14965 2.3219-10.11611 2.3864-11.00127z" fill="currentcolor"/></svg></a></li><li class=footer__social-item><a class=footer__social-link target=_blank rel="noopener noreferrer nofollow" href=https://habr.com/ru/company/leroy_merlin/blog/ aria-label=" "><svg width="10" height="15" viewBox="0 0 10 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.32857 5.86364C4 4.93636 5 4.5 6.3 4.5 8.38571 4.5 10 5.93182 10 8.29091V15H6.67143V9.45c0-1.20682-.62143-1.88182-1.65-1.88182-.92857.0-1.69286.61364-1.69286 1.93637V15H0V0H3.32857V5.86364z" fill="#888"/></svg></a></li><li class=footer__social-item><a class=footer__social-link target=_blank rel="noopener noreferrer nofollow" href=https://vc.ru/leroymerlintech aria-label=" "><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.8058 7.42086C13.9835 7.42086 14.8702 6.93019 15.524 6.07597L14.6502 5.4093c-.2158.28445-.4948.51489-.8149.67315-.32.15827-.672499999999999.24003-1.0295.23885-1.2783.0-2.2045-1.04134-2.2045-2.31912C10.6013 2.72441 11.5124 1.62442 12.8422 1.62442c.591099999999999.0 1.0089.13955 1.3733.36533V3.11329h1.0996V1.47508L15.1044 1.3093C14.5.833743 13.5769.581299 12.8053.581299c-1.8862.0-3.42043 1.534231-3.42043 3.420451.0 1.88444 1.53333 3.41911 3.42043 3.41911H12.8058zm2.2813 6.74664L15.048 12.5929V8.75019H12.7546v1.1h1.1352V12.4573C13.8898 13.5804 13.032 14.3755 12.1666 14.3755 11.3013 14.3755 10.8498 13.7755 10.8498 12.6529V8.74974H8.70753v1.1h.984V12.8435c0 1.5236.85427 2.5734 2.37777 2.5734.8756.0 1.5422-.485799999999999 1.94-1.2347H14.0271L14.184 15.2293h1.7622V14.1689H15.0884V14.1666L15.0871 14.1675zM9.13153.742635H7.22042L5.5582 5.5693H5.53242L3.87909.742635H1.84264V1.84307H2.98798L4.95909 7.34441H6.0062V7.34307L8.06176 1.84352H9.13064V.743083L9.13153.742635zM.0541992 15.2435H1.18664v-1.132H.0546437v1.132H.0541992zM4.42753 10.0257H4.41509L4.34398 8.75019H2.32264V9.75286H3.3982V14.168H2.32264v1.0609H7.3182v-1.04H4.53687V11.5244C4.66264 10.56 5.38576 9.73641 6.37242 9.73641H6.3902L6.3702 10.7222H7.46975V8.73196H6.60042C5.60487 8.72929 4.8662 9.26797 4.42709 10.0262L4.42753 10.0257z" fill="currentcolor"/></svg></a></li></ul></div></footer><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/aos@3.0.0-beta.6/dist/aos.js></script>
<script>AOS.init({once:!0})</script><script src=/js/main.min.2b827f0a42a4837e9cb50f60d7c91d0ae7b4fe9f5be04b7e8b892409c41741d6.js integrity="sha256-K4J/CkKkg36ctQ9g18kdCue0/p9b4Et+i4kkCcQXQdY=" crossorigin=anonymous></script></body></html>